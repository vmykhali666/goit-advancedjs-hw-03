{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/index.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.headers.common[\"x-api-key\"] = \"live_eYmGlwPg4DflDjAiWzOtGpnDD6HzE87EAiIKqzxar0VvCvikiUN37dJCMs5As8ja\";\n\nexport async function fetchBreeds() {\n    return await axios.get(\"https://api.thecatapi.com/v1/breeds\");\n}\n\nexport async function fetchCatByBreed(breedId) {\n    return await axios.get(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`)\n}","import { fetchBreeds, fetchCatByBreed } from \"./js/cat-api.js\"\nimport SlimSelect from 'slim-select'\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst selector = document.querySelector(\".breed-select\");\nconst catInfo = document.querySelector(\".cat-info\");\nconst loaderEl = document.querySelector(\".loader\");\n\nfunction ShowError(message) {\n    iziToast.show({\n        title: 'Error',\n        message: `‚ùå Oops! ${message}`,\n        position: 'topRight',\n        color: 'red',\n    });\n}\n\nfunction toggleClass(element, isVisible) {\n    element.classList.toggle('hidder', isVisible);\n}\n\nfunction createBreedDetailsMarkup(data) {\n    const img = data[0].url;\n    \n    const { name, description, temperament, origin, country_code } = data[0].breeds[0]\n  \n    catInfo.innerHTML = `\n      <div class=\"content__wrapper\">\n        <img class=\"content__img\" src=\"${img}\" alt=\"${name}\"/>\n        <div class=\"content__info\">\n          <h2 class=\"info__title\">${name}</h2>\n          <p><b class=\"info__text\">Description:</b> ${description}</p>\n          <p><b class=\"info__text\">Temperament:</b> ${temperament}</p>\n          <p><b class=\"info__text\">Country:</b> ${origin}</p>\n          <img class=\"info__flag\" src=\"https://flagsapi.com/${country_code}/shiny/64.png\" alt=\"Country code\"> \n        </div>\n      </div>\n    `;\n}\n\nconst select = new SlimSelect({\n    select: selector,\n    settings : {\n        placeholderText: 'Search breeds',\n    },\n    events : {\n        afterChange : async newVal => {\n            toggleClass(catInfo, false);\n            toggleClass(loaderEl, true);\n\n            if (!newVal[0].value) {\n                return;\n            }\n\n            await fetchCatByBreed(newVal[0].value)\n            .then(response => {\n                if (response.status !== 200) {\n                    throw new Error(response.status);\n                }\n                createBreedDetailsMarkup(response.data);\n            })\n            .catch(error => {\n                ShowError(error);\n            })\n            .finally(() => {\n                toggleClass(loaderEl, false);\n                toggleClass(catInfo, true);\n            });\n        }\n    }\n});\n\n(async function fetchOnLoad() {\n    toggleClass(selector, false);\n    toggleClass(loaderEl, true);\n    await fetchBreeds()\n    .then(response => {\n        if (response.status !== 200) {\n            throw new Error(response.status);\n        }\n        \n        const options = response.data.map((breed) => ({ text: breed.name, value: breed.id }));\n        select.setData([{ placeholder: true, text: '' }, ...options]);\n    })\n    .catch(error => {\n        ShowError(error);\n    })\n    .finally(() => {\n        toggleClass(loaderEl, false);\n        toggleClass(selector, true);\n    });\n})();"],"names":["axios","fetchBreeds","fetchCatByBreed","breedId","selector","catInfo","loaderEl","ShowError","message","iziToast","toggleClass","element","isVisible","createBreedDetailsMarkup","data","img","name","description","temperament","origin","country_code","select","SlimSelect","newVal","response","error","options","breed"],"mappings":"owBAEAA,EAAM,SAAS,QAAQ,OAAO,aAAe,wEAEtC,eAAeC,GAAc,CAChC,OAAO,MAAMD,EAAM,IAAI,qCAAqC,CAChE,CAEO,eAAeE,EAAgBC,EAAS,CAC3C,OAAO,MAAMH,EAAM,IAAI,wDAAwDG,GAAS,CAC5F,CCLA,MAAMC,EAAW,SAAS,cAAc,eAAe,EACjDC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAW,SAAS,cAAc,SAAS,EAEjD,SAASC,EAAUC,EAAS,CACxBC,EAAS,KAAK,CACV,MAAO,QACP,QAAS,WAAWD,IACpB,SAAU,WACV,MAAO,KACf,CAAK,CACL,CAEA,SAASE,EAAYC,EAASC,EAAW,CACrCD,EAAQ,UAAU,OAAO,SAAUC,CAAS,CAChD,CAEA,SAASC,EAAyBC,EAAM,CACpC,MAAMC,EAAMD,EAAK,GAAG,IAEd,CAAE,KAAAE,EAAM,YAAAC,EAAa,YAAAC,EAAa,OAAAC,EAAQ,aAAAC,CAAc,EAAGN,EAAK,GAAG,OAAO,GAEhFT,EAAQ,UAAY;AAAA;AAAA,yCAEiBU,WAAaC;AAAA;AAAA,oCAElBA;AAAA,sDACkBC;AAAA,sDACAC;AAAA,kDACJC;AAAA,8DACYC;AAAA;AAAA;AAAA,KAI9D,CAEA,MAAMC,EAAS,IAAIC,EAAW,CAC1B,OAAQlB,EACR,SAAW,CACP,gBAAiB,eACpB,EACD,OAAS,CACL,YAAc,MAAMmB,GAAU,CAC1Bb,EAAYL,EAAS,EAAK,EAC1BK,EAAYJ,EAAU,EAAI,EAErBiB,EAAO,GAAG,OAIf,MAAMrB,EAAgBqB,EAAO,GAAG,KAAK,EACpC,KAAKC,GAAY,CACd,GAAIA,EAAS,SAAW,IACpB,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnCX,EAAyBW,EAAS,IAAI,CACtD,CAAa,EACA,MAAMC,GAAS,CACZlB,EAAUkB,CAAK,CAC/B,CAAa,EACA,QAAQ,IAAM,CACXf,EAAYJ,EAAU,EAAK,EAC3BI,EAAYL,EAAS,EAAI,CACzC,CAAa,CACJ,CACJ,CACL,CAAC,GAEA,gBAA6B,CAC1BK,EAAYN,EAAU,EAAK,EAC3BM,EAAYJ,EAAU,EAAI,EAC1B,MAAML,EAAa,EAClB,KAAKuB,GAAY,CACd,GAAIA,EAAS,SAAW,IACpB,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGnC,MAAME,EAAUF,EAAS,KAAK,IAAKG,IAAW,CAAE,KAAMA,EAAM,KAAM,MAAOA,EAAM,EAAE,EAAG,EACpFN,EAAO,QAAQ,CAAC,CAAE,YAAa,GAAM,KAAM,EAAI,EAAE,GAAGK,CAAO,CAAC,CACpE,CAAK,EACA,MAAMD,GAAS,CACZlB,EAAUkB,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACXf,EAAYJ,EAAU,EAAK,EAC3BI,EAAYN,EAAU,EAAI,CAClC,CAAK,CACL,GAAI"}